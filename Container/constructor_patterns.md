# STL å®¹å™¨å»ºæ§‹å‡½å¼è¨­è¨ˆæ¨¡å¼åˆ†æ

## ğŸ”µ è¨­è¨ˆåŸå‰‡

1. **ä¸€è‡´æ€§**: ç›¸åŒèªç¾©åœ¨ä¸åŒå®¹å™¨ä¸­è¡Œç‚ºä¸€è‡´
2. **æ­£äº¤æ€§**: ä¸åŒå»ºæ§‹æ–¹å¼æ»¿è¶³ä¸åŒéœ€æ±‚ï¼Œäº’ä¸é‡ç–Š
3. **æ•ˆç‡**: é¿å…ä¸å¿…è¦çš„è¤‡è£½å’Œè¨˜æ†¶é«”åˆ†é…

---

## ğŸ“Š å»ºæ§‹å‡½å¼å®Œæ•´åˆ†é¡

### 1. é è¨­å»ºæ§‹ (Default)

```cpp
std::vector<int> v;
std::string s;
```

- **æ”¯æ´**: æ‰€æœ‰å®¹å™¨ âœ…
- **è¤‡é›œåº¦**: O(1)

### 2. è¤‡è£½å»ºæ§‹ (Copy)

```cpp
std::vector<int> v2(v1);
std::vector<int> v3 = v1;
```

- **æ”¯æ´**: æ‰€æœ‰å®¹å™¨ âœ…
- **è¤‡é›œåº¦**: O(n)ï¼Œæ·±æ‹·è²

### 3. ç§»å‹•å»ºæ§‹ (Move, C++11)

```cpp
std::vector<int> v2(std::move(v1));
```

- **æ”¯æ´**: æ‰€æœ‰å®¹å™¨ âœ…
- **è¤‡é›œåº¦**: O(1)ï¼Œè³‡æºè½‰ç§»

### 4. å¡«å……å»ºæ§‹ (Fill)

```cpp
std::vector<int> v(10, 42);    // 10 å€‹å…ƒç´ ï¼Œå€¼ç‚º 42
std::string s(10, '*');        // "**********"
```

- **æ”¯æ´**: åƒ…åºåˆ—å®¹å™¨ âœ… (vector, deque, list, string)
- **ä¸æ”¯æ´**: array (å›ºå®šå¤§å°), é—œè¯å®¹å™¨ (å…ƒç´ å”¯ä¸€æ€§), ç„¡åºå®¹å™¨
- **è¤‡é›œåº¦**: O(n)

### 5. ç¯„åœå»ºæ§‹ (Range)

```cpp
std::vector<int> v(source.begin(), source.end());
std::set<int> s(vec.begin(), vec.end());
```

- **æ”¯æ´**: æ‰€æœ‰å®¹å™¨ âœ… (é™¤äº† array)
- **è¤‡é›œåº¦**: O(n) æˆ– O(n log n)

### 6. åˆå§‹åŒ–åˆ—è¡¨ (Initializer List, C++11)

```cpp
std::vector<int> v = {1, 2, 3, 4, 5};
std::set<int> s = {3, 1, 4};           // è‡ªå‹•æ’åº
std::array<int, 3> arr = {1, 2, 3};
```

- **æ”¯æ´**: æ‰€æœ‰å®¹å™¨ âœ…
- **è¤‡é›œåº¦**: O(n) æˆ– O(n log n)

### 7. å®¹å™¨ç‰¹å®šå»ºæ§‹

**std::string**:

```cpp
std::string sub(str, 5, 10);   // å­å­—ä¸²ï¼šå¾ä½ç½® 5ï¼Œé•·åº¦ 10
std::string s("Hello", 3);     // C-stringï¼šå‰ 3 å€‹å­—å…ƒ "Hel"
```

**std::array**:

```cpp
std::array<int, 5> arr = {1, 2, 3, 4, 5};  // èšåˆåˆå§‹åŒ–
std::array<int, 5> arr{};                  // é›¶åˆå§‹åŒ–
```

- **èšåˆåˆå§‹åŒ–** (Aggregate Initialization): ç”¨æ–¼åˆå§‹åŒ–èšåˆé¡å‹ï¼ˆç„¡è‡ªè¨‚å»ºæ§‹å‡½å¼ã€ç„¡ç§æœ‰/ä¿è­·æˆå“¡ã€ç„¡è™›å‡½å¼çš„é¡åˆ¥æˆ–çµæ§‹ï¼‰ï¼Œç›´æ¥ç”¨ `{}` åˆå§‹åŒ–æ‰€æœ‰æˆå“¡

**é—œè¯å®¹å™¨** (set, map):

```cpp
std::set<int, std::greater<int>> s({1, 2, 3});  // è‡ªè¨‚æ¯”è¼ƒå™¨
```

**ç„¡åºå®¹å™¨** (unordered_set, unordered_map):

```cpp
std::unordered_set<int> s(100);  // æŒ‡å®š bucket æ•¸é‡
```

---

## ğŸ“‹ å®¹å™¨æ”¯æ´çŸ©é™£

| å»ºæ§‹å‡½å¼   | vector | deque | list | string | array | set/map | unordered |
| ---------- | ------ | ----- | ---- | ------ | ----- | ------- | --------- |
| é è¨­       | âœ…     | âœ…    | âœ…   | âœ…     | âœ…    | âœ…      | âœ…        |
| è¤‡è£½       | âœ…     | âœ…    | âœ…   | âœ…     | âœ…    | âœ…      | âœ…        |
| ç§»å‹•       | âœ…     | âœ…    | âœ…   | âœ…     | âœ…    | âœ…      | âœ…        |
| å¡«å……       | âœ…     | âœ…    | âœ…   | âœ…     | âŒ    | âŒ      | âŒ        |
| ç¯„åœ       | âœ…     | âœ…    | âœ…   | âœ…     | âŒ    | âœ…      | âœ…        |
| åˆå§‹åŒ–åˆ—è¡¨ | âœ…     | âœ…    | âœ…   | âœ…     | âœ…    | âœ…      | âœ…        |

**è¨­è¨ˆåŸç†**:

- **array ä¸æ”¯æ´å¡«å……/ç¯„åœ**: å¤§å°å›ºå®šï¼Œç·¨è­¯æœŸæŒ‡å®š
- **é—œè¯/ç„¡åºå®¹å™¨ä¸æ”¯æ´å¡«å……**: å…ƒç´ å”¯ä¸€æ€§ç´„æŸï¼Œå¡«å……ç›¸åŒå€¼ç„¡æ„ç¾©

---

## âš ï¸ å¸¸è¦‹é™·é˜±

### 1. `()` vs `{}` èªç¾©å·®ç•°

```cpp
std::vector<int> v1(10, 5);   // å¡«å……ï¼š10 å€‹å…ƒç´ ï¼Œå€¼ç‚º 5
std::vector<int> v2{10, 5};   // åˆ—è¡¨ï¼š2 å€‹å…ƒç´  {10, 5}

std::string s1(10, 'A');      // "AAAAAAAAAA"
std::string s2{10, 'A'};      // "\nA" (2 å€‹å­—å…ƒï¼šASCII 10 å’Œ 'A')
```

**è¦å‰‡**: `{}` å„ªå…ˆåŒ¹é… `initializer_list`ï¼Œ`()` å‘¼å«å‚³çµ±å»ºæ§‹å‡½å¼

### 2. std::array çš„ç‰¹æ®Šæ€§

```cpp
// âœ… æ­£ç¢ºï¼šèšåˆåˆå§‹åŒ–
std::array<int, 5> arr = {1, 2, 3, 4, 5};

// âŒ éŒ¯èª¤ï¼šç„¡è‡ªè¨‚å»ºæ§‹å‡½å¼
std::array<int, 5> arr(10, 0);              // ç·¨è­¯éŒ¯èª¤
std::array<int, 5> arr(v.begin(), v.end()); // ç·¨è­¯éŒ¯èª¤
```

**åŸå› **: `std::array` æ˜¯èšåˆé¡å‹ (aggregate type)ï¼Œé›¶é–‹éŠ·æŠ½è±¡ï¼Œä¸æä¾›è‡ªè¨‚å»ºæ§‹å‡½å¼

**æ·±å…¥è§£æ**ï¼šé—œæ–¼ `std::array` ç‚ºä½•ä¸æä¾› fill/range constructor çš„å®Œæ•´è¨­è¨ˆç†å¿µåˆ†æï¼Œè«‹åƒé–±ï¼š[std::array è¨­è¨ˆç†å¿µæ·±åº¦è§£æ](./array_design_philosophy.md)

**æ›¿ä»£æ–¹æ¡ˆ**ï¼š

```cpp
// ç·¨è­¯æœŸåˆå§‹åŒ–
std::array<int, 5> arr = {42, 42, 42, 42, 42};

// é‹è¡ŒæœŸå¡«å……
std::array<int, 5> arr;
arr.fill(42);
```

### 3. é—œè¯å®¹å™¨ç„¡å¡«å……å»ºæ§‹

```cpp
// âŒ ä¸å­˜åœ¨ï¼šå¡«å……ç›¸åŒå€¼é•åå”¯ä¸€æ€§
// std::set<int> s(10, 42);  // ç·¨è­¯éŒ¯èª¤

// âœ… æ›¿ä»£æ–¹æ¡ˆ
std::vector<int> temp(10, 42);
std::multiset<int> ms(temp.begin(), temp.end());  // å…è¨±é‡è¤‡
```

---

## ğŸ’¡ æœ€ä½³å¯¦è¸

### 1. æ˜ç¢ºè¡¨é”æ„åœ–

```cpp
// å¡«å……ï¼šé‡è¤‡å…ƒç´ ç”¨ ()
std::vector<int> buffer(1024, 0);

// åˆ—è¡¨ï¼šæ˜ç¢ºå…ƒç´ ç”¨ {}
std::vector<int> data{1, 2, 3, 4, 5};

// ç¯„åœï¼šå¾å…¶ä»–å®¹å™¨
std::set<int> unique(vec.begin(), vec.end());
```

### 2. æ•ˆèƒ½æœ€ä½³åŒ–

```cpp
// âŒ ä½æ•ˆï¼šå¤šæ¬¡é‡æ–°åˆ†é…
std::vector<int> v;
for (int i = 0; i < 1000; ++i)
    v.push_back(0);

// âœ… é«˜æ•ˆï¼šä¸€æ¬¡åˆ†é…
std::vector<int> v(1000, 0);
```

### 3. æ³›å‹ç¨‹å¼è¨­è¨ˆ

```cpp
// åˆ©ç”¨ä¸€è‡´çš„ä»‹é¢
template<typename Container>
Container createFilled(size_t n, typename Container::value_type val) {
    return Container(n, val);
}

auto v = createFilled<std::vector<int>>(100, 42);
auto d = createFilled<std::deque<double>>(50, 3.14);
auto s = createFilled<std::string>(20, '*');
```

---

## ğŸ“ è¨­è¨ˆæ™ºæ…§ç¸½çµ

1. **é€šç”¨å»ºæ§‹** (é è¨­ã€è¤‡è£½ã€ç§»å‹•ã€ç¯„åœã€åˆå§‹åŒ–åˆ—è¡¨) åœ¨æ‰€æœ‰å®¹å™¨ä¿æŒä¸€è‡´
2. **å¡«å……å»ºæ§‹** åƒ…é©ç”¨æ–¼åºåˆ—å®¹å™¨ (å‹•æ…‹å¤§å° + å¯é‡è¤‡å…ƒç´ )
3. **ç‰¹å®šå»ºæ§‹** åæ˜ å®¹å™¨ç¨ç‰¹æ€§è³ª (string å­å­—ä¸²ã€é—œè¯å®¹å™¨æ¯”è¼ƒå™¨)
4. **std::array** æ˜¯ç‰¹ä¾‹ï¼šå›ºå®šå¤§å° â†’ èšåˆåˆå§‹åŒ–

### é¸æ“‡å»ºæ§‹å‡½å¼çš„æ±ºç­–æ¨¹

```
å¾ç¾æœ‰å®¹å™¨/ç¯„åœæ§‹é€ ï¼Ÿ
â”œâ”€ æ˜¯ â†’ ç¯„åœå»ºæ§‹æˆ–è¤‡è£½/ç§»å‹•
â””â”€ å¦ â†’ éœ€è¦å¤šå€‹ç›¸åŒå…ƒç´ ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ å¡«å……å»ºæ§‹ (åºåˆ—å®¹å™¨)
    â””â”€ å¦ â†’ æ˜ç¢ºå…ƒç´ åˆ—è¡¨ï¼Ÿ
        â”œâ”€ æ˜¯ â†’ åˆå§‹åŒ–åˆ—è¡¨
        â””â”€ å¦ â†’ é è¨­å»ºæ§‹
```

---

## ğŸ”— ç›¸é—œä¸»é¡Œ

- `emplace` ç³»åˆ—å‡½å¼çš„å°±åœ°å»ºæ§‹
- Allocator-aware å®¹å™¨
- CTAD (C++17) é¡åˆ¥æ¨¡æ¿åƒæ•¸æ¨å°
- Ranges (C++20) ç¾ä»£ç¯„åœå»ºæ§‹
